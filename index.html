<!doctype html>
<html>

<head>
	<title>CryptoCurrency mining analysis</title>

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.13/dist/semantic.min.css">

	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.13/dist/semantic.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
	<script src="https://unpkg.com/vue"></script>
</head>

<body>
	<div id="app" class="ui container">
		<div class="ui basic segment">
			<form class="ui form">
				<div class="fields">
					<div class="field">
						<label>Hashrate (GH/s)</label>
						<input type=number v-model="hashRate" v-on:input='drawGraph'>
					</div>
					<div class="field">
						<label>Difficulty</label>
						<input type=number v-model="difficulty" v-on:input='drawGraph'>
					</div>
					<div class="field">
						<label>Bitcoin price (CHF)</label>
						<input type=number v-model="bitcoinPrice" v-on:input='drawGraph'>
					</div>
					<div class="field">
						<label>Power consumption (Watts)</label>
						<input type=number v-model="powerConsumption" v-on:input='drawGraph'>
					</div>
					<div class="field">
						<label>Cost per KW/h (CHF)</label>
						<input type=number v-model="electricityRate" v-on:input='drawGraph'>
					</div>
					<div class="field">
						<label>Hardware cost (CHF)</label>
						<input type=number v-model="hardwareCost" v-on:input='drawGraph'>
					</div>
				</div>
				<div class="inline fields">
					<label>Chart currency: </label>
					<div class="field">
						<div class="ui radio checkbox">
					        <input type="radio" value="bitcoin" v-model="currency" v-on:change='drawGraph'>
					        <label>Bitcoin</label>
						</div>
					</div>
					<div class="field">
						<div class="ui radio checkbox">
					        <input type="radio" value="chf" v-model="currency" v-on:change='drawGraph'>
					        <label>Swiss francs</label>
						</div>
					</div>
				</div>
			</form>
		</div>
		<div class="field">
			<label> La difficulté d'écriture des transactions est un paramètre important pour calculer la rentabilité du minage. En effet, cette difficulté
					est en hausse depuis le lancement du Bitcoin. Pour notre travail, nous avons calculé une courbe de tendance exponentielle sur l'historique
					de la difficulté et nous l'avons utilisée pour estimer l'évolution future de la difficulté </label>
		</div>
		<div class="ui basic segment">
			<canvas id="difficultyGraph"></canvas>
		</div>
		<div class="ui basic center aligned segment">
			<div class="ui statistic">
				<div class="value">
					{{ dailyProfit.toFixed(2) }} CHF
				</div>
				<div class="label">
					Daily profit
				</div>
			</div>
		</div>
		<div class="ui basic segment">
			<canvas id="profitGraph"></canvas>
		</div>
		<div class="ui basic segment">
			<canvas id="profitGraphPower"></canvas>
		</div>
		
	</div>

	<script>
		var app = new Vue({
			el: '#app',

			data: {
				hashRate: 4730, // GH/s
				difficulty: 1590896927258,
				bitcoinPrice: 19000, // CHF
				powerConsumption: 1293, // Watts
				electricityRate: 0.12, // CHF
				currency: 'bitcoin', // 'bitcoin' of 'chf'
				hardwareCost: 500, // CHF
				dailyProfit: 0 //CHF
			},

			methods: {
				drawProfitGraphExp: function ()
				{
					var reward = 12.5;
					var BTCPerDay = 24 / (this.difficulty * Math.pow(2, 32) / (this.hashRate * Math.pow(10, 9)) / 60 / 60) * reward;
					
					var electricityCHFCostPerDay = this.powerConsumption * this.electricityRate * 24 / 1000;
					this.dailyProfit = BTCPerDay * this.bitcoinPrice - electricityCHFCostPerDay;
					var dailyBTCProfit = BTCPerDay - electricityCHFCostPerDay / this.bitcoinPrice;
						
					var ctx = document.getElementById('profitGraph').getContext('2d');
					var dates = []
					var datas = []
					
					var daysSinceBeginning = moment().diff('2009-01-03', 'days')/2;
					console.log(daysSinceBeginning);
					var estimatedDifficulty;
					var estimatedBTCPerDay;
					var estimatedDailyProfit;
					var estimatedDailyBTCProfit;
					
					console.log(this.difficulty);
					console.log(BTCPerDay);
					
					for ( var i = 0 ; i <= 365 ; i++)
					{
						dates.push(newDate(i));
						
						estimatedDifficulty = Math.pow(3.2622*Math.E,0.00789*(daysSinceBeginning+i/2));
						estimatedBTCPerDay  = 24 / (estimatedDifficulty * Math.pow(2, 32) / (this.hashRate * Math.pow(10, 9)) / 60 / 60) * reward;
						estimatedDailyProfit = estimatedBTCPerDay * this.bitcoinPrice - electricityCHFCostPerDay;
						estimatedDailyBTCProfit = estimatedBTCPerDay - electricityCHFCostPerDay / this.bitcoinPrice
						
						switch (this.currency)
						{
							case 'bitcoin':
								datas.push(i * estimatedDailyBTCProfit - this.hardwareCost / this.bitcoinPrice);
							break;

							case 'chf':
								datas.push(i * estimatedDailyProfit - this.hardwareCost);
							break;
						}
					}

					function newDate(days) {
						return moment().add(days, 'd').toDate();
					}

					function newDateString(days) {
						return moment().add(days, 'd').format('LL');
					}

					function newTimestamp(days) {
						return moment().add(days, 'd').unix();
					}

					var config = {
						type: 'line',
						data: {
							labels: dates,
							datasets: [{
								label: "label",
								backgroundColor: 'rgb(255, 99, 132)',
								borderColor: 'rgb(255, 99, 132)',
								fill: true,
								data: datas,
							}]
						},
						options: {
			                title:{
			                    text: "Bitcoin mining analysis",
								display: true
			                },
							scales: {
								xAxes: [{
									type: "time",
									time: {
										format: 'MMM YYYY',
										tooltipFormat: 'D MMM YYYY'
									},
									scaleLabel: {
										display: false,
										labelString: 'Date'
									}
								}, ],
								yAxes: [{
									scaleLabel: {
										display: true,
										labelString: 'Net worth'
									}
								}]
							},
							elements: { 
								point: { 
									radius: 0 
								} 
							}
						}
					};

					var profitChart = new Chart(ctx,config);
				},
				drawProfitGraphPower: function ()
				{
					var reward = 12.5;
					var BTCPerDay = 24 / (this.difficulty * Math.pow(2, 32) / (this.hashRate * Math.pow(10, 9)) / 60 / 60) * reward;
					
					var electricityCHFCostPerDay = this.powerConsumption * this.electricityRate * 24 / 1000;
					this.dailyProfit = BTCPerDay * this.bitcoinPrice - electricityCHFCostPerDay;
					var dailyBTCProfit = BTCPerDay - electricityCHFCostPerDay / this.bitcoinPrice;
						
					var ctx = document.getElementById('profitGraphPower').getContext('2d');
					var dates = []
					var datas = []
					
					var daysSinceBeginning = moment().diff('2009-01-03', 'days')/2;
					console.log(daysSinceBeginning);
					
					var estimatedDifficulty;
					var estimatedBTCPerDay;
					var estimatedDailyProfit;
					var estimatedDailyBTCProfit;
					
					console.log(this.difficulty);
					console.log(BTCPerDay);
					
					for ( var i = 0 ; i <= 365 ; i++)
					{
						dates.push(newDate(i));
						
						
						estimatedDifficulty = 0.0032*Math.pow(daysSinceBeginning+i/2,5) - 10.947*Math.pow(daysSinceBeginning+i/2,4) +
												13661*Math.pow(daysSinceBeginning+i/2,3) - 7e+6*Math.pow(daysSinceBeginning+i/2,2) + 
												1e+9*(daysSinceBeginning+i/2) - 6e+10; 
						estimatedBTCPerDay  = 24 / (estimatedDifficulty * Math.pow(2, 32) / (this.hashRate * Math.pow(10, 9)) / 60 / 60) * reward;
						estimatedDailyProfit = estimatedBTCPerDay * this.bitcoinPrice - electricityCHFCostPerDay;
						estimatedDailyBTCProfit = estimatedBTCPerDay - electricityCHFCostPerDay / this.bitcoinPrice
						
						switch (this.currency)
						{
							case 'bitcoin':
								datas.push(i * estimatedDailyBTCProfit - this.hardwareCost / this.bitcoinPrice);
							break;

							case 'chf':
								datas.push(i * estimatedDailyProfit - this.hardwareCost);
							break;
						}
					}

					function newDate(days) {
						return moment().add(days, 'd').toDate();
					}

					function newDateString(days) {
						return moment().add(days, 'd').format('LL');
					}

					function newTimestamp(days) {
						return moment().add(days, 'd').unix();
					}

					var config = {
						type: 'line',
						data: {
							labels: dates,
							datasets: [{
								label: "label",
								backgroundColor: 'rgb(255, 99, 132)',
								borderColor: 'rgb(255, 99, 132)',
								fill: true,
								data: datas,
							}]
						},
						options: {
			                title:{
			                    text: "Bitcoin mining analysis",
								display: true
			                },
							scales: {
								xAxes: [{
									type: "time",
									time: {
										format: 'MMM YYYY',
										tooltipFormat: 'D MMM YYYY'
									},
									scaleLabel: {
										display: false,
										labelString: 'Date'
									}
								}, ],
								yAxes: [{
									scaleLabel: {
										display: true,
										labelString: 'Net worth'
									}
								}]
							},
							elements: { 
								point: { 
									radius: 0 
								} 
							}
						}
					};

					var profitChartPower = new Chart(ctx,config);
				},
				drawDifficultyGraph: function()
				{
					var ctx = document.getElementById('difficultyGraph').getContext('2d');
					var dates = [];
					var datas = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
								1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
								1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
								1.182899534,1.182899534,1.182899534,1.182899534,1.182899534,1.182899534,1.305062132,1.305062132,1.305062132,1.305062132,
								1.305062132,1.305062132,1.305062132,1.344224971,1.344224971,1.344224971,1.344224971,1.344224971,1.818648536,1.818648536,
								1.818648536,1.818648536,1.818648536,2.527738215,2.527738215,2.527738215,2.527738215,2.527738215,3.781179252,3.781179252,
								3.781179252,3.781179252,3.781179252,3.781179252,4.53108175,4.53108175,4.53108175,4.53108175,4.53108175,4.53108175,4.53108175,
								4.56516291,4.56516291,4.56516291,4.56516291,4.56516291,6.085476906,6.085476906,6.085476906,6.085476906,6.085476906,7.819796993,
								7.819796993,7.819796993,7.819796993,7.819796993,11.46431581,11.46431581,11.46431581,11.46431581,11.46431581,11.46431581,
								12.84918315,12.84918315,12.84918315,12.84918315,12.84918315,12.84918315,12.84918315,12.84918315,11.84622815,11.84622815,
								11.84622815,11.84622815,11.84622815,16.61907875,16.61907875,16.61907875,16.61907875,16.61907875,16.61907875,16.61907875,
								17.38148816,17.38148816,17.38148816,17.38148816,17.38148816,17.38148816,19.40479633,19.40479633,19.40479633,19.40479633,
								19.40479633,19.40479633,23.50125722,23.50125722,23.50125722,45.38582234,45.38582234,181.5432894,181.5432894,181.5432894,
								181.5432894,181.5432894,244.2132231,244.2132231,244.2132231,244.2132231,244.2132231,352.1612091,352.1612091,352.1612091,
								352.1612091,352.1612091,511.7735343,511.7735343,511.7735343,511.7735343,511.7735343,511.7735343,623.3869599,623.3869599,
								623.3869599,623.3869599,623.3869599,623.3869599,712.8848646,712.8848646,712.8848646,712.8848646,712.8848646,917.8307413,
								917.8307413,917.8307413,917.8307413,917.8307413,1318.67005,1318.67005,1318.67005,1318.67005,1318.67005,1318.67005,1318.67005,
								1378.028165,1378.028165,1378.028165,1378.028165,2149.021815,2149.021815,2149.021815,2149.021815,2149.021815,3091.73689,
								3091.73689,3091.73689,3091.73689,3091.73689,4536.353723,4536.353723,4536.353723,4536.353723,4536.353723,6866.898649,
								6866.898649,6866.898649,6866.898649,6866.898649,8078.195258,8078.195258,8078.195258,8078.195258,8078.195258,12251.99976,
								12251.99976,12251.99976,12251.99976,12251.99976,12251.99976,14484.16236,14484.16236,14484.16236,14484.16236,14484.16236,
								14484.16236,16307.42094,16307.42094,16307.42094,16307.42094,16307.42094,16307.42094,18437.64439,18437.64439,18437.64439,
								18437.64439,18437.64439,18437.64439,22012.38134,22012.38134,22012.38134,22012.38134,22012.38134,22012.38134,25997.87993,
								25997.87993,25997.87993,25997.87993,25997.87993,36459.88693,36459.88693,36459.88693,36459.88693,36459.88693,55589.51813,
								55589.51813,55589.51813,55589.51813,55589.51813,76192.61935,76192.61935,76192.61935,76192.61935,76192.61935,76192.61935,
								76192.61935,76192.61935,68977.78463,68977.78463,68977.78463,68977.78463,68977.78463,68977.78463,82345.64411,82345.64411,
								82345.64411,82345.64411,82345.64411,82345.64411,92347.59095,92347.59095,92347.59095,92347.59095,92347.59095,92347.59095,
								109670.1333,109670.1333,109670.1333,109670.1333,109670.1333,157416.4018,157416.4018,157416.4018,157416.4018,244112.4878,
								244112.4878,244112.4878,244112.4878,434877.0455,434877.0455,434877.0455,434877.0455,434877.0455,567269.5302,567269.5302,
								567269.5302,567269.5302,567269.5302,876954.4935,876954.4935,876954.4935,876954.4935,1379192.288,1379192.288,1379192.288,
								1379192.288,1379192.288,1379192.288,1379192.288,1563027.996,1563027.996,1563027.996,1563027.996,1563027.996,1563027.996,
								1690895.803,1690895.803,1690895.803,1690895.803,1690895.803,1690895.803,1888786.705,1888786.705,1888786.705,1888786.705,
								1888786.705,1888786.705,1888786.705,1888786.705,1805700.836,1805700.836,1805700.836,1805700.836,1805700.836,1805700.836,
								1805700.836,1777774.482,1777774.482,1777774.482,1777774.482,1777774.482,1777774.482,1777774.482,1755425.32,1755425.32,
								1755425.32,1755425.32,1755425.32,1755425.32,1755425.32,1755425.32,1689334.405,1689334.405,1689334.405,1689334.405,1689334.405,
								1689334.405,1689334.405,1689334.405,1468195.427,1468195.427,1468195.427,1468195.427,1468195.427,1468195.427,1468195.427,
								1468195.427,1203461.926,1203461.926,1203461.926,1203461.926,1203461.926,1203461.926,1203461.926,1192497.75,1192497.75,
								1192497.75,1192497.75,1192497.75,1192497.75,1192497.75,1192497.75,1090715.68,1090715.68,1090715.68,1090715.68,1090715.68,
								1090715.68,1155038.334,1155038.334,1155038.334,1155038.334,1155038.334,1155038.334,1155038.334,1159929.497,1159929.497,
								1159929.497,1159929.497,1159929.497,1159929.497,1159929.497,1250757.739,1250757.739,1250757.739,1250757.739,1250757.739,
								1250757.739,1307728.361,1307728.361,1307728.361,1307728.361,1307728.361,1307728.361,1307728.361,1379647.439,1379647.439,
								1379647.439,1379647.439,1379647.439,1379647.439,1379647.439,1376302.268,1376302.268,1376302.268,1376302.268,1376302.268,
								1376302.268,1496978.595,1496978.595,1496978.595,1496978.595,1496978.595,1496978.595,1496978.595,1498294.363,1498294.363,
								1498294.363,1498294.363,1498294.363,1498294.363,1498294.363,1626553.481,1626553.481,1626553.481,1626553.481,1626553.481,
								1626553.481,1626553.481,1577913.486,1577913.486,1577913.486,1577913.486,1577913.486,1577913.486,1577913.486,1577913.486,
								1508589.672,1508589.672,1508589.672,1508589.672,1508589.672,1733207.514,1733207.514,1733207.514,1733207.514,1733207.514,
								1733207.514,1733207.514,1733207.514,1591074.962,1591074.962,1591074.962,1591074.962,1591074.962,1591074.962,1591074.962,
								1591074.962,1583177.847,1583177.847,1583177.847,1583177.847,1583177.847,1726566.559,1726566.559,1726566.559,1726566.559,
								1726566.559,1726566.559,1726566.559,1751454.535,1751454.535,1751454.535,1751454.535,1751454.535,1751454.535,1751454.535,
								1866391.305,1866391.305,1866391.305,1866391.305,1866391.305,1866391.305,2036671.089,2036671.089,2036671.089,2036671.089,
								2036671.089,2036671.089,2036671.089,2190865.97,2190865.97,2190865.97,2190865.97,2190865.97,2190865.97,2440642.607,
								2440642.607,2440642.607,2440642.607,2440642.607,2440642.607,2694047.953,2694047.953,2694047.953,2694047.953,2694047.953,
								2694047.953,2694047.953,2864140.508,2864140.508,2864140.508,2864140.508,2864140.508,2864140.508,2864140.508,3054627.527,
								3054627.527,3054627.527,3054627.527,3054627.527,3054627.527,3054627.527,3072321.732,3072321.732,3072321.732,3072321.732,
								3072321.732,3072321.732,3304356.393,3304356.393,3304356.393,3304356.393,3304356.393,3304356.393,3304356.393,3368767.141,
								3368767.141,3368767.141,3368767.141,3368767.141,3368767.141,3368767.141,3438908.96,3438908.96,3438908.96,3438908.96,
								3438908.96,3438908.96,3438908.96,3370181.799,3370181.799,3370181.799,3370181.799,3370181.799,3370181.799,3370181.799,
								3370181.799,2979636.617,2979636.617,2979636.617,2979636.617,2979636.617,2979636.617,3249549.584,3249549.584,3249549.584,
								3249549.584,3249549.584,3249549.584,3249549.584,3249549.584,3249549.584,2968775.332,2968775.332,2968775.332,2968775.332,
								2968775.332,3275464.587,3275464.587,3275464.587,3275464.587,3275464.587,3275464.587,3275464.587,3651011.631,3651011.631,
								3651011.631,3651011.631,3651011.631,4367876.001,4367876.001,4367876.001,4367876.001,4367876.001,4367876.001,4367876.001,
								4847647.152,4847647.152,4847647.152,4847647.152,4847647.152,6695826.283,6695826.283,6695826.283,6695826.283,6695826.283,
								6695826.283,7672999.92,7672999.92,7672999.92,7672999.92,7672999.92,7672999.92,8974296.015,8974296.015,8974296.015,8974296.015,
								8974296.015,8974296.015,10076292.88,10076292.88,10076292.88,10076292.88,10076292.88,10076292.88,10076292.88,11187257.46,
								11187257.46,11187257.46,11187257.46,11187257.46,11187257.46,12153411.71,12153411.71,12153411.71,12153411.71,12153411.71,
								15605632.68,15605632.68,15605632.68,15605632.68,15605632.68,15605632.68,19339258.27,19339258.27,19339258.27,19339258.27,
								19339258.27,19339258.27,21335329.11,21335329.11,21335329.11,21335329.11,21335329.11,21335329.11,26162875.68,26162875.68,
								26162875.68,26162875.68,26162875.68,26162875.68,31256960.73,31256960.73,31256960.73,31256960.73,31256960.73,31256960.73,
								37392766.14,37392766.14,37392766.14,37392766.14,37392766.14,50810339.05,50810339.05,50810339.05,50810339.05,50810339.05,
								65750060.15,65750060.15,65750060.15,65750060.15,65750060.15,65750060.15,86933017.77,86933017.77,86933017.77,86933017.77,
								86933017.77,112628548.7,112628548.7,112628548.7,112628548.7,112628548.7,148819199.8,148819199.8,148819199.8,148819199.8,
								148819199.8,148819199.8,189281249.3,189281249.3,189281249.3,189281249.3,189281249.3,267731249.5,267731249.5,267731249.5,
								267731249.5,267731249.5,390928787.6,390928787.6,390928787.6,390928787.6,390928787.6,510929738,510929738,510929738,510929738,
								510929738,510929738,609482679.9,609482679.9,609482679.9,609482679.9,609482679.9,609482679.9,707408283.1,707408283.1,
								707408283.1,707408283.1,707408283.1,908350862.4,908350862.4,908350862.4,908350862.4,908350862.4,908350862.4,1180923195,
								1180923195,1180923195,1180923195,1180923195,1180923195,1418481395,1418481395,1418481395,1418481395,1418481395,1789546951,
								1789546951,1789546951,1789546951,1789546951,1789546951,2193847870,2193847870,2193847870,2193847870,2193847870,2193847870,
								2621404453,2621404453,2621404453,2621404453,2621404453,2621404453,3129573175,3129573175,3129573175,3129573175,3129573175,
								3815723799,3815723799,3815723799,3815723799,3815723799,3815723799,3815723799,4250217920,4250217920,4250217920,4250217920,
								4250217920,4250217920,5006860589,5006860589,5006860589,5006860589,5006860589,6119726089,6119726089,6119726089,6119726089,
								6119726089,6119726089,6978842650,6978842650,6978842650,6978842650,6978842650,6978842650,6978842650,8000872136,8000872136,
								8000872136,8000872136,8000872136,8000872136,8853416309,8853416309,8853416309,8853416309,8853416309,8853416309,10455720138,
								10455720138,10455720138,10455720138,10455720138,10455720138,11756551917,11756551917,11756551917,11756551917,11756551917,
								11756551917,13462580115,13462580115,13462580115,13462580115,13462580115,13462580115,16818461371,16818461371,16818461371,
								16818461371,16818461371,16818461371,16818461371,17336316979,17336316979,17336316979,17336316979,17336316979,17336316979,
								18736441558,18736441558,18736441558,18736441558,18736441558,18736441558,18736441558,19729645941,19729645941,19729645941,
								19729645941,19729645941,19729645941,23844670039,23844670039,23844670039,23844670039,23844670039,23844670039,27428630902,
								27428630902,27428630902,27428630902,27428630902,27428630902,29829733124,29829733124,29829733124,29829733124,29829733124,
								29829733124,34661425924,34661425924,34661425924,34661425924,34661425924,34661425924,34661425924,35002482026,35002482026,
								35002482026,35002482026,35002482026,35002482026,35002482026,35985640265,35985640265,35985640265,35985640265,35985640265,
								35985640265,39603666252,39603666252,39603666252,39603666252,39603666252,39603666252,39603666252,40300030328,40300030328,
								40300030328,40300030328,40300030328,40300030328,40300030328,40300030328,40007470271,40007470271,40007470271,40007470271,
								40007470271,40007470271,40007470271,39457671307,39457671307,39457671307,39457671307,39457671307,39457671307,40640955017,
								40640955017,40640955017,40640955017,40640955017,40640955017,43971662056,43971662056,43971662056,43971662056,43971662056,								
								43971662056,43971662056,43971662056,41272873895,41272873895,41272873895,41272873895,41272873895,41272873895,44455415962,
								44455415962,44455415962,44455415962,44455415962,44455415962,44455415962,46684376317,46684376317,46684376317,46684376317,
								46684376317,46684376317,46684376317,47427554951,47427554951,47427554951,47427554951,47427554951,47427554951,47427554951,
								47427554951,46717549645,46717549645,46717549645,46717549645,46717549645,46717549645,49446390688,49446390688,49446390688,
								49446390688,49446390688,49446390688,49446390688,49446390688,47610564513,47610564513,47610564513,47610564513,47610564513,
								47610564513,47643398018,47643398018,47643398018,47643398018,47643398018,47643398018,47643398018,48807487245,48807487245,								
								48807487245,48807487245,48807487245,48807487245,48807487245,48807487245,47589591154,47589591154,47589591154,47589591154,
								47589591154,47589591154,49692386355,49692386355,49692386355,49692386355,49692386355,49692386355,49692386355,49402014931,
								49402014931,49402014931,49402014931,49402014931,49402014931,49402014931,51076366303,51076366303,51076366303,51076366303,
								51076366303,51076366303,52278304846,52278304846,52278304846,52278304846,52278304846,52278304846,52278304846,52699842409,
								52699842409,52699842409,52699842409,52699842409,52699842409,52699842409,54256630328,54256630328,54256630328,54256630328,
								54256630328,54256630328,54256630328,56957648455,56957648455,56957648455,56957648455,56957648455,56957648455,56957648455,
								59335351234,59335351234,59335351234,59335351234,59335351234,59335351234,60813224039,60813224039,60813224039,60813224039,
								60813224039,60813224039,60813224039,60883825480,60883825480,60883825480,60883825480,60883825480,60883825480,60883825480,
								62253982450,62253982450,62253982450,62253982450,62253982450,62253982450,62253982450,65848255180,65848255180,65848255180,
								65848255180,65848255180,65848255180,72722780643,72722780643,72722780643,72722780643,72722780643,72722780643,72722780643,
								79102380900,79102380900,79102380900,79102380900,79102380900,79102380900,93448670796,93448670796,93448670796,93448670796,
								93448670796,93448670796,1.0388E+11,1.0388E+11,1.0388E+11,1.0388E+11,1.0388E+11,1.0388E+11,1.13354E+11,1.13354E+11,1.13354E+11,
								1.13354E+11,1.13354E+11,1.13354E+11,1.13354E+11,1.20033E+11,1.20033E+11,1.20033E+11,1.20033E+11,1.20033E+11,1.20033E+11,
								1.44116E+11,1.44116E+11,1.44116E+11,1.44116E+11,1.44116E+11,1.44116E+11,1.63492E+11,1.63492E+11,1.63492E+11,1.63492E+11,
								1.63492E+11,1.63492E+11,1.63492E+11,1.63492E+11,1.58427E+11,1.58427E+11,1.58427E+11,1.58427E+11,1.58427E+11,1.58427E+11,
								1.65497E+11,1.65497E+11,1.65497E+11,1.65497E+11,1.65497E+11,1.65497E+11,1.65497E+11,1.66852E+11,1.66852E+11,1.66852E+11,
								1.66852E+11,1.66852E+11,1.66852E+11,1.78678E+11,1.78678E+11,1.78678E+11,1.78678E+11,1.78678E+11,1.78678E+11,1.78678E+11,								
								1.78666E+11,1.78659E+11,1.78659E+11,1.78659E+11,1.78659E+11,1.78659E+11,1.78659E+11,1.94255E+11,1.94255E+11,1.94255E+11,
								1.94255E+11,1.94255E+11,1.94255E+11,1.94771E+11,1.99312E+11,1.99312E+11,1.99312E+11,1.99312E+11,1.99312E+11,1.99312E+11,
								1.99312E+11,1.96061E+11,1.96061E+11,1.96061E+11,1.96061E+11,1.96061E+11,1.96061E+11,2.06307E+11,2.09453E+11,2.09453E+11,
								2.09453E+11,2.09453E+11,2.09453E+11,2.09453E+11,2.13399E+11,2.13399E+11,2.13399E+11,2.13399E+11,2.13399E+11,2.13399E+11,
								2.13399E+11,2.13493E+11,2.13493E+11,2.13493E+11,2.13493E+11,2.13493E+11,2.13493E+11,2.13493E+11,2.10798E+11,2.01893E+11,
								2.01893E+11,2.01893E+11,2.01893E+11,2.01893E+11,2.01893E+11,2.17375E+11,2.17375E+11,2.17375E+11,2.17375E+11,2.17375E+11,
								2.17375E+11,2.17375E+11,2.20756E+11,2.20756E+11,2.20756E+11,2.20756E+11,2.20756E+11,2.20756E+11,2.20756E+11,2.25833E+11,
								2.25833E+11,2.25833E+11,2.25833E+11,2.25833E+11,2.25833E+11,2.34689E+11,2.41227E+11,2.41227E+11,2.41227E+11,2.41227E+11,
								2.41227E+11,2.41227E+11,2.58523E+11,2.58523E+11,2.58523E+11,2.58523E+11,2.58523E+11,2.58523E+11,2.58523E+11,2.53618E+11,
								2.53618E+11,2.53618E+11,2.53618E+11,2.53618E+11,2.53618E+11,2.53618E+11,2.5462E+11,2.5462E+11,2.5462E+11,2.5462E+11,
								2.5462E+11,2.5462E+11,2.72435E+11,2.81801E+11,2.81801E+11,2.81801E+11,2.81801E+11,2.81801E+11,2.81801E+11,2.8618E+11,
								2.86766E+11,2.86766E+11,2.86766E+11,2.86766E+11,2.86766E+11,2.86766E+11,3.10154E+11,3.10154E+11,3.10154E+11,3.10154E+11,
								3.10154E+11,3.10154E+11,3.12083E+11,3.17688E+11,3.17688E+11,3.17688E+11,3.17688E+11,3.17688E+11,3.17688E+11,3.369E+11,
								3.369E+11,3.369E+11,3.369E+11,3.369E+11,3.369E+11,3.92963E+11,3.92963E+11,3.92963E+11,3.92963E+11,3.92963E+11,3.92963E+11,
								3.93568E+11,4.22171E+11,4.22171E+11,4.22171E+11,4.22171E+11,4.22171E+11,4.22171E+11,4.32944E+11,4.4078E+11,4.4078E+11,
								4.4078E+11,4.4078E+11,4.4078E+11,4.4078E+11,4.60769E+11,4.60769E+11,4.60769E+11,4.60769E+11,4.60769E+11,4.60769E+11,
								4.60769E+11,4.75705E+11,4.75705E+11,4.75705E+11,4.75705E+11,4.75705E+11,4.75705E+11,4.82855E+11,4.99636E+11,4.99636E+11,
								4.99636E+11,4.99636E+11,4.99636E+11,4.99636E+11,5.17808E+11,5.20809E+11,5.20809E+11,5.20809E+11,5.20809E+11,5.20809E+11,
								5.20809E+11,5.2184E+11,5.21975E+11,5.21975E+11,5.21975E+11,5.21975E+11,5.21975E+11,5.21975E+11,5.59971E+11,5.59971E+11,
								5.59971E+11,5.59971E+11,5.59971E+11,5.59971E+11,5.84152E+11,5.95922E+11,5.95922E+11,5.95922E+11,5.95922E+11,5.95922E+11,
								6.28337E+11,6.7876E+11,6.7876E+11,6.7876E+11,6.7876E+11,6.7876E+11,6.7876E+11,7.11697E+11,7.11697E+11,7.11697E+11,7.11697E+11,
								7.11697E+11,7.11697E+11,7.11697E+11,7.08708E+11,7.08659E+11,7.08659E+11,7.08659E+11,7.08659E+11,7.08659E+11,7.61765E+11,
								8.04525E+11,8.04525E+11,8.04525E+11,8.04525E+11,8.04525E+11,8.04525E+11,8.60222E+11,8.60222E+11,8.60222E+11,8.60222E+11,
								8.60222E+11,8.60222E+11,8.88075E+11,9.23233E+11,9.23233E+11,9.23233E+11,9.23233E+11,9.23233E+11,9.23233E+11,9.23233E+11,
								8.88172E+11,8.88172E+11,8.88172E+11,8.88172E+11,8.88172E+11,8.88172E+11,9.03315E+11,9.22725E+11,9.22725E+11,9.22725E+11,
								9.22725E+11,9.22725E+11,1.05219E+12,1.1034E+12,1.1034E+12,1.1034E+12,1.1034E+12,1.1034E+12,1.1034E+12,1.12359E+12,1.12386E+12,
								1.12386E+12,1.12386E+12,1.12386E+12,1.12386E+12,1.12386E+12,1.19679E+12,1.19679E+12,1.19679E+12,1.19679E+12,1.19679E+12,
								1.23378E+12,1.45284E+12,1.45284E+12,1.45284E+12,1.45284E+12,1.45284E+12,1.45284E+12,1.45284E+12,1.36442E+12,1.36442E+12,
								1.36442E+12,1.36442E+12,1.36442E+12,1.36442E+12,1.36442E+12,1.347E+12,1.347E+12,1.347E+12,1.347E+12,1.347E+12,1.347E+12,
								1.5909E+12,1.5909E+12,1.5909E+12,1.5909E+12,1.5909E+12,1.5909E+12,1.87311E+12];
					
					var trendLine = [];
					var trendLinePoly = [];
					
					for( var i = 0 ; i <= 1636 ; i++)
					{
						dates.push(newDate(i));
						trendLine.push(Math.pow(3.2622*Math.E,0.00789*i));
						trendLinePoly.push(0.0032*Math.pow(i,5) - 10.947*Math.pow(i,4) +
												13661*Math.pow(i,3) - 7e+6*Math.pow(i,2) + 
												1e+9*i - 6e+10)
					}
					function newDate(days) {
						return moment("20090103", "YYYYMMDD").add(2 * days, 'd').toDate();
					}
					
					var config = {
						type: 'line',
						data: {
							labels: dates,
							datasets: [{
								label: "datas",
								backgroundColor: 'rgb(255, 99, 132)',
								borderColor: 'rgb(255, 99, 132)',
								fill: false,
								data: datas,
							},{
								label: "trendline (exponential)",
								backgroundColor: 'rgb(23, 156, 12)',
								borderColor: 'rgb(23, 156, 12)',
								fill: false,
								data: trendLine,
							},{
								label: "trendline (polynomial degree 6",
								backgroundColor: 'rgb(10, 99, 255)',
								borderColor: 'rgb(10, 99, 255)',
								fill: false,
								data: trendLinePoly,
							}]
						},
						options: {
			                title:{
			                    text: "historical difficulty value",
								display: true
			                },
							scales: {
								xAxes: [{
									type: "time",
									time: {
										format: 'YYYY',
										tooltipFormat: 'YYYY'
									},
									scaleLabel: {
										display: false,
										labelString: 'Time'
									}
								}, ],
								yAxes: [{
									scaleLabel: {
										display: true,
										labelString: 'difficulty'
									}
								}]
							},
							elements: { 
								point: { 
									radius: 0 
								} 
							}
						}
					}
					var difficultyChart = new Chart(ctx,config);
				}
			},
		});

		app.drawProfitGraphExp();
		app.drawProfitGraphPower();
		app.drawDifficultyGraph();

		// Initialize Semantic UI components
	    $('.ui.checkbox').checkbox();
	</script>
</body>

</html>
